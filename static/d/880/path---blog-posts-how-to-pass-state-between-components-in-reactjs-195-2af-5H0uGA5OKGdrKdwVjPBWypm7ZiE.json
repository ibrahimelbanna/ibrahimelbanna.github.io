{"data":{"markdownRemark":{"html":"<p>In this post, i'll explain how to pass a state between components in Reactjs.\nWe'll build a small 'How many books did you read?' app, in this application, we\nhave two main components one big called 'Library' and another small 'Book', we have 3 books in the library state and each book has its own state. check any book to count as read. <a href=\"https://zeyadetman.github.io/howmanybooks/\">try the app here</a></p>\n<p><strong>Let's begin with code:</strong></p>\n<h2>Passing state from parent to child</h2>\n<p>In our Library component we have this state</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript \"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript  line-numbers\"><code class=\"language-javascript \">this.state = {\n  reads: 0,\n  books: [\n    {\n      name: &quot;Zero to one&quot;,\n      isbn: &quot;9780804139298&quot;,\n      author: &quot;Peter Thiel&quot;,\n      cover: &quot;https://images.gr-assets.com/books/1414347376l/18050143.jpg&quot;,\n      status: false\n    },\n    {\n      name: &quot;The Manager&#39;s Path&quot;,\n      isbn: &quot;9781491973899&quot;,\n      author: &quot;Camille Fournier&quot;,\n      cover: &quot;https://images.gr-assets.com/books/1484107737l/33369254.jpg&quot;,\n      status: false\n    },\n    {\n      name: &quot;Calculus, Better Explained&quot;,\n      isbn: &quot;9781470070700&quot;,\n      author: &quot;Kalid Azad&quot;,\n      cover: &quot;https://images.gr-assets.com/books/1448590460l/27993945.jpg&quot;,\n      status: false\n    }\n  ]\n};</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>and want to create <code class=\"language-text\">this.state.books.length</code> - as a number - <code class=\"language-text\">Book</code> components each have props from the <code class=\"language-text\">books</code> array of the <code class=\"language-text\">Library</code> component's state. We have to deal with the two components.</p>\n<p><strong>First</strong> with the parent, we have to create the <code class=\"language-text\">Book</code> component <code class=\"language-text\">this.state.books.length</code> - as a number - times, and pass our diffrent values to them Like this:</p>\n<p><a href=\"https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Library/Library.jsx\">Full Code here</a></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript \"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript  line-numbers\"><code class=\"language-javascript \">{\n  this.state.books.map((_book, _id) =&gt; {\n    return (\n      &lt;Book\n        handleCounter={this.handleCounter}\n        key={_id}\n        id={_book.isbn}\n        name={_book.name}\n        isbn={_book.isbn}\n        author={_book.author}\n        cover={_book.cover}\n      /&gt;\n    );\n  });\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>Note</em> ignore <code class=\"language-text\">handleCounter</code> for now.</p>\n<p><strong>Second</strong> with the child <code class=\"language-text\">Book</code>, we have the values from parent, let's use them:</p>\n<p><a href=\"https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Book/Book.jsx\">Full code here</a></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript \"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript  line-numbers\"><code class=\"language-javascript \">...\nrender() {\n\treturn (\n\t\t&lt;Card&gt;\n\t\t\t&lt;Image\n\t\t\t\tsrc={this.props.cover}\n    \t\t\talt=&quot;Book cover&quot;\n...</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Until now we created 3 <code class=\"language-text\">Book</code> components from the parent component <code class=\"language-text\">Library</code>, and set their values from the parent state.\nEasy! Right?\nGreat, let's begin the second part</p>\n<h2>Passing state from child to parent</h2>\n<p>In this section, we want to handle the number of books you read by checking on each book checkbox.</p>\n<p>In our <code class=\"language-text\">Book</code> we have this state</p>\n<p><a href=\"https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Book/Book.jsx\">Full code here</a></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx \"><pre style=\"counter-reset: linenumber 0\" class=\"language-jsx  line-numbers\"><code class=\"language-jsx \">this.state = {\n  status: false,\n  id: this.props.id\n};</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>Note</em> don't forget to pass <code class=\"language-text\">props</code> to component's constructor.</p>\n<p><code class=\"language-text\">status</code> means if you read this book or not, and its default value is <code class=\"language-text\">false</code>, <code class=\"language-text\">id</code> is the id of this book and i set it by book id like we learned in the previous section.</p>\n<p>we need to handle change of this status then update the books array in the parent state.</p>\n<p>In our <code class=\"language-text\">Book</code> component, we'll add a checkbox that recieve the change of the book status and pass <code class=\"language-text\">this.handleChange</code> to its <code class=\"language-text\">onChange</code> event like this:</p>\n<p><a href=\"https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Book/Book.jsx\">Full code here</a></p>\n<div class=\"gatsby-highlight\" data-language=\"js \"><pre style=\"counter-reset: linenumber 0\" class=\"language-js  line-numbers\"><code class=\"language-js \">&lt;input type=&quot;checkbox&quot; name=&quot;example&quot; onChange={this.handleChange} /&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>you need to bind the function first, then update the <code class=\"language-text\">Book</code> state with the new status, after updating the child state we'll update the state of the parent <code class=\"language-text\">Library</code> like this:</p>\n<p><a href=\"https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Book/Book.jsx\">Full code here</a></p>\n<div class=\"gatsby-highlight\" data-language=\"js \"><pre style=\"counter-reset: linenumber 0\" class=\"language-js  line-numbers\"><code class=\"language-js \">handleChange() {\n\t\tthis.setState({status: !this.state.status}, this.updateLibraryCount);\n    }\n\nupdateLibraryCount() {\n\t\tthis.props.handleCounter(this.state);\n\t}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>In <code class=\"language-text\">updateLibraryCount</code> we used <code class=\"language-text\">handleCounter</code> function of the <code class=\"language-text\">Library</code> as a prop, then passed the <code class=\"language-text\">Book</code> state to it, Now the <code class=\"language-text\">Library</code> sees the <code class=\"language-text\">Book</code> state, Great! let's use it.</p>\n<p><a href=\"https://github.com/zeyadetman/howmanybooks/blob/master/src/components/Library/Library.jsx\">Full Code here</a></p>\n<div class=\"gatsby-highlight\" data-language=\"js \"><pre style=\"counter-reset: linenumber 0\" class=\"language-js  line-numbers\"><code class=\"language-js \">handleCounter(_State) {\n        //Get the index of this book by searching by its unique isbn\n        const ObjNum = this.state.books.findIndex(\n\t\t\t_book =&gt; _book.isbn === _State.id\n        );\n\n        //then update its value in the Library component\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tbooks: update(\n\t\t\t\t\tObjNum,\n\t\t\t\t\t{...this.state.books[ObjNum], status: _State.status},\n\t\t\t\t\tthis.state.books\n\t\t\t\t)\n\t\t\t},\n\t\t\t() =&gt; {\n                //this is a callback to handle the new change of the book status\n\t\t\t\t//and increment the reads\n\t\t\t\tconst _read = this.state.books.filter(_book =&gt;\n\t\t\t\t\t_book.status === true\n\t\t\t\t).length;\n\t\t\t\tthis.setState({reads: _read});\n\t\t\t}\n\t\t);\n\t}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>I hope you're understand how to pass the state from the parent to child and vice versa, Here's the <a href=\"https://github.com/zeyadetman/howmanybooks\">full code</a>, and this is the <a href=\"https://zeyadetman.github.io/projects/2018/07/25/How-to-pass-state-between-components-in-reactjs.html\">original post on my blog</a>. If you have questions, feel free to ask in comments or <a href=\"zeyadetman@gmail.com\">email</a>.</p>","fields":{"slug":"blog/posts/How-to-pass-state-between-components-in-reactjs/"},"frontmatter":{"date":"July 25, 2018","title":"How to pass state between components in reactjs (Full Code)"},"timeToRead":4,"wordCount":{"words":401}}},"pageContext":{"slug":"blog/posts/How-to-pass-state-between-components-in-reactjs/"}}